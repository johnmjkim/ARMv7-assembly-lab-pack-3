.syntax unified
@ --------------------- Module Interface --------------------
@ Symbol exports:
@ NOTE: these symbols should be used in the following way:
@   ldr r0, =SYMBOL

@ base addresses (ADR = address)
@ Cortex M4
.global ADR_SYST_CSR    @ 0xE000E010
.global ADR_SYST_RVR    @ 0xE000E014
.global ADR_SYST_CVR    @ 0xE000E018
.global ADR_NVIC        @ 0xE000E000
.global ADR_SCB_ICSR    @ 0xE000ED04
.global ADR_SCB_SHPR1   @ 0xE000ED18
.global ADR_SCB_SHPR2   @ 0xE000ED1C
.global ADR_SCB_SHPR3   @ 0xE000ED20
.global ADR_MPU,        @ 0xE000ED90

@ offsets (OFS = offset)
@ NVIC
.global OFS_NVIC_ISER0   @ 0x100
.global OFS_NVIC_ICER0   @ 0x180
.global OFS_NVIC_ISPR0   @ 0x200
.global OFS_NVIC_ICPR0   @ 0x280
.global OFS_NVIC_IABR0   @ 0x300
.global OFS_NVIC_IPR0    @ 0x400

.global OFS_NVIC_ISER1   @ 0x104
.global OFS_NVIC_ICER1   @ 0x184
.global OFS_NVIC_ISPR1   @ 0x204
.global OFS_NVIC_ICPR1   @ 0x284
.global OFS_NVIC_IABR1   @ 0x304
.global OFS_NVIC_IPR1    @ 0x404

@ Peripherals

.global ADR_P0
.global ADR_P1
.global OFS_GPIO_OUT
.global OFS_GPIO_OUTSET
.global OFS_GPIO_OUTCLR
.global OFS_GPIO_IN
.global OFS_GPIO_DIR
.global OFS_GPIO_DIRSET
.global OFS_GPIO_DIRCLR

.global ADR_GPIOTE
.global GPIOTE_ID
.global OFS_GPIOTE_TASKS_OUT0
.global OFS_GPIOTE_TASKS_OUT1
.global OFS_GPIOTE_TASKS_OUT2
.global OFS_GPIOTE_TASKS_OUT3
.global OFS_GPIOTE_TASKS_OUT4
.global OFS_GPIOTE_TASKS_OUT5
.global OFS_GPIOTE_TASKS_OUT6
.global OFS_GPIOTE_TASKS_OUT7
.global OFS_GPIOTE_TASKS_SET0
.global OFS_GPIOTE_TASKS_SET1
.global OFS_GPIOTE_TASKS_SET2
.global OFS_GPIOTE_TASKS_SET3
.global OFS_GPIOTE_TASKS_SET4
.global OFS_GPIOTE_TASKS_SET5
.global OFS_GPIOTE_TASKS_SET6
.global OFS_GPIOTE_TASKS_SET7
.global OFS_GPIOTE_TASKS_CLR0
.global OFS_GPIOTE_TASKS_CLR1
.global OFS_GPIOTE_TASKS_CLR2
.global OFS_GPIOTE_TASKS_CLR3
.global OFS_GPIOTE_TASKS_CLR4
.global OFS_GPIOTE_TASKS_CLR5
.global OFS_GPIOTE_TASKS_CLR6
.global OFS_GPIOTE_TASKS_CLR7
.global OFS_GPIOTE_EVENTS_IN0
.global OFS_GPIOTE_EVENTS_IN1
.global OFS_GPIOTE_EVENTS_IN2
.global OFS_GPIOTE_EVENTS_IN3
.global OFS_GPIOTE_EVENTS_IN4
.global OFS_GPIOTE_EVENTS_IN5
.global OFS_GPIOTE_EVENTS_IN6
.global OFS_GPIOTE_EVENTS_IN7
.global OFS_GPIOTE_EVENTS_PORT
.global OFS_GPIOTE_INTENSET
.global OFS_GPIOTE_INTENCLR
.global OFS_GPIOTE_CONFIG0
.global OFS_GPIOTE_CONFIG1
.global OFS_GPIOTE_CONFIG2
.global OFS_GPIOTE_CONFIG3
.global OFS_GPIOTE_CONFIG4
.global OFS_GPIOTE_CONFIG5
.global OFS_GPIOTE_CONFIG6
.global OFS_GPIOTE_CONFIG7


@ --------------------- Implementation --------------------
.set ADR_SYST_CSR,  0xE000E010
.set ADR_SYST_RVR,  0xE000E014
.set ADR_SYST_CVR,  0xE000E018
.set ADR_NVIC,      0xE000E000
.set ADR_SCB_ICSR,  0xE000ED04
.set ADR_SCB_SHPR1, 0xE000ED18
.set ADR_SCB_SHPR2, 0xE000ED1C
.set ADR_SCB_SHPR3, 0xE000ED20
.set ADR_ICSR,      0xE000ED00
.set ADR_SHPR,      0xE000ED14
.set ADR_MPU,       0xE000ED90

.set OFS_NVIC_ISER0,  0x100
.set OFS_NVIC_ICER0,  0x180
.set OFS_NVIC_ISPR0,  0x200
.set OFS_NVIC_ICPR0,  0x280
.set OFS_NVIC_IABR0,  0x300
.set OFS_NVIC_IPR0,   0x400

.set OFS_NVIC_ISER1,  0x104
.set OFS_NVIC_ICER1,  0x184
.set OFS_NVIC_ISPR1,  0x204
.set OFS_NVIC_ICPR1,  0x284
.set OFS_NVIC_IABR1,  0x304
.set OFS_NVIC_IPR1,   0x404


@ ---------- GPIO ---------- @

@ GPIO Port Base Addresses
.set ADR_P0, 0x50000000 @ Port 0
.set ADR_P1, 0x50000300 @ Port 1
@ GPIO Offsets
.set OFS_GPIO_OUT,      0x504
.set OFS_GPIO_OUTSET,   0x508
.set OFS_GPIO_OUTCLR,   0x50C
.set OFS_GPIO_IN,       0x510
.set OFS_GPIO_DIR,      0x514
.set OFS_GPIO_DIRSET,   0x518
.set OFS_GPIO_DIRCLR,   0x51C


@ ---------- GPIO Tasks and Events ---------- @

@ GPIOTE Base Address
.set ADR_GPIOTE, 0x40006000
@ ID of GPIOTE in NVIC
.set GPIOTE_ID, 6
@ GPIOTE Offsets
.set OFS_GPIOTE_TASKS_OUT0, 0x000
.set OFS_GPIOTE_TASKS_OUT1, 0x004
.set OFS_GPIOTE_TASKS_OUT2, 0x008
.set OFS_GPIOTE_TASKS_OUT3, 0x00C
.set OFS_GPIOTE_TASKS_OUT4, 0x010
.set OFS_GPIOTE_TASKS_OUT5, 0x014
.set OFS_GPIOTE_TASKS_OUT6, 0x018
.set OFS_GPIOTE_TASKS_OUT7, 0x01C
.set OFS_GPIOTE_TASKS_SET0, 0x030
.set OFS_GPIOTE_TASKS_SET1, 0x034
.set OFS_GPIOTE_TASKS_SET2, 0x038
.set OFS_GPIOTE_TASKS_SET3, 0x03C
.set OFS_GPIOTE_TASKS_SET4, 0x040
.set OFS_GPIOTE_TASKS_SET5, 0x044
.set OFS_GPIOTE_TASKS_SET6, 0x048
.set OFS_GPIOTE_TASKS_SET7, 0x04C
.set OFS_GPIOTE_TASKS_CLR0, 0x060
.set OFS_GPIOTE_TASKS_CLR1, 0x064
.set OFS_GPIOTE_TASKS_CLR2, 0x068
.set OFS_GPIOTE_TASKS_CLR3, 0x06C
.set OFS_GPIOTE_TASKS_CLR4, 0x070
.set OFS_GPIOTE_TASKS_CLR5, 0x074
.set OFS_GPIOTE_TASKS_CLR6, 0x078
.set OFS_GPIOTE_TASKS_CLR7, 0x07C
.set OFS_GPIOTE_EVENTS_IN0, 0x100
.set OFS_GPIOTE_EVENTS_IN1, 0x104
.set OFS_GPIOTE_EVENTS_IN2, 0x108
.set OFS_GPIOTE_EVENTS_IN3, 0x10C
.set OFS_GPIOTE_EVENTS_IN4, 0x110
.set OFS_GPIOTE_EVENTS_IN5, 0x114
.set OFS_GPIOTE_EVENTS_IN6, 0x118
.set OFS_GPIOTE_EVENTS_IN7, 0x11C
.set OFS_GPIOTE_EVENTS_PORT, 0x17C
.set OFS_GPIOTE_INTENSET, 0x304
.set OFS_GPIOTE_INTENCLR, 0x308
.set OFS_GPIOTE_CONFIG0, 0x510
.set OFS_GPIOTE_CONFIG1, 0x514
.set OFS_GPIOTE_CONFIG2, 0x518
.set OFS_GPIOTE_CONFIG3, 0x51C
.set OFS_GPIOTE_CONFIG4, 0x520
.set OFS_GPIOTE_CONFIG5, 0x524
.set OFS_GPIOTE_CONFIG6, 0x528
.set OFS_GPIOTE_CONFIG7, 0x52C